@if (fileName) {
<div class="card card-body my-4">
  <div class="flex justify-between">
    <div class="flex">
      <svg
        width="48"
        height="48"
        viewBox="0 0 24 24"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M6.63513 1H13.9933L20.2258 7.50232V20.1349C20.2258 21.7163 18.9421 23 17.3607 23H6.63513C5.05374 23 3.77002 21.7163 3.77002 20.1349V3.86511C3.77002 2.28372 5.05374 1 6.63513 1Z"
          fill="#00733B"
        />
        <path
          opacity="0.302"
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M13.9839 1V7.4465H20.2257L13.9839 1Z"
          fill="white"
        />
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M8.61646 17.1395H11.5374V18.2465H8.61646V17.1395ZM12.449 11.4837H15.3793V12.5814H12.449V11.4837ZM8.61646 11.4837H11.5374V12.5814H8.61646V11.4837ZM12.449 13.3442H15.3793V14.4512H12.449V13.3442ZM8.61646 13.3442H11.5374V14.4512H8.61646V13.3442ZM12.449 15.2791H15.3793V16.3861H12.449V15.2791ZM8.61646 15.2791H11.5374V16.3861H8.61646V15.2791ZM12.449 17.1395H15.3793V18.2465H12.449V17.1395Z"
          fill="white"
        />
      </svg>

      <div class="flex flex-col">
        <p class="ml-2">{{ fileName }}</p>
        <p class="ml-2 text-slate-500 text-sm">{{ fileSize }}</p>
      </div>
    </div>
    <div>
      <button (click)="removerArchivoSeleccionado()">
        <i class="ki-outline ki-cross"></i>
      </button>
    </div>
  </div>
</div>
} @else {
<form action="">
  <div class="flex items-center justify-center w-full my-4">
    <label
      for="dropzone-file"
      class="flex flex-col items-center justify-center w-full h-64 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:border-gray-600 dark:hover:border-gray-500 dark:hover:bg-gray-600"
      (dragover)="onDragOver($event)"
      (dragleave)="onDragLeave($event)"
      (drop)="onDrop($event)"
    >
      <div class="flex flex-col items-center justify-center pt-5 pb-6">
        <svg
          class="w-8 h-8 mb-4 text-gray-500 dark:text-gray-400"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 20 16"
        >
          <path
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"
          />
        </svg>
        <p class="mb-2 text-sm text-gray-500 dark:text-gray-400">
          <span class="font-semibold text-blue-400 underline"
            >Click para cargar</span
          >
          o arrastra y suelta
        </p>
        <p class="text-xs text-gray-500 dark:text-gray-400">
          Extensiones permitidas: {{ archivosAdmitidos }}
        </p>
      </div>
      <input
        id="dropzone-file"
        type="file"
        [accept]="archivosAdmitidos"
        class="hidden"
        (change)="onFileChange($event)"
      />
    </label>
  </div>
</form>
}

<!-- Nota de advertencia -->
<div class="mt-4 mb-6 p-4 bg-amber-50 border border-amber-200 rounded-lg">
  <div class="flex items-start">
    <svg class="w-5 h-5 text-amber-500 mt-0.5 mr-3 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
      <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
    </svg>
    <div>
      <p class="text-sm font-medium text-amber-800 mb-1">Importante: Límite de registros</p>
      <p class="text-sm text-amber-700">
        La cantidad máxima de registros permitida por archivo es de <span class="font-semibold">500 registros</span>. 
        Los archivos que excedan este límite no podrán ser procesados correctamente.
      </p>
      <p class="text-xs text-amber-600 mt-2">
        <i class="ki-outline ki-information mr-1"></i>
        Recomendamos dividir archivos grandes en múltiples archivos de máximo 500 registros cada uno.
      </p>
    </div>
  </div>
</div>

<div class="flex justify-between">
  <div>
    <app-button
      texto="Ejemplo"
      color="primary"
      type="button"
      (click)="descargarEjemploImportar()"
    ></app-button>
  </div>
  <div class="flex justify-end gap-4 w-full">
    <button type="button" class="btn btn-light" (click)="emitirCerrarModal.emit()">
      Cancelar
    </button>
    <app-button
      texto="Importar"
      color="primary"
      type="button"
      (click)="uploadFile()"
      [estaDeshabilitado]="!selectedFile"
      [estaCargando]="estaImportando$ | async"
      textoCargando="Importando..."
    ></app-button>
  </div>
</div>

@if (erroresImportar.length) {
<div class="mt-5 scrollable-y-auto max-h-56">
  <table class="table align-middle text-gray-700 font-medium text-sm">
    <thead>
      <tr>
        <th>Fila</th>
        <th>Campo</th>
        <th>Error</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let error of erroresImportar">
        <td>{{ error.fila }}</td>
        <td>{{ error.campo }}</td>
        <td>{{ error.error }}</td>
      </tr>
    </tbody>
  </table>
</div>
<div class="d-flex justify-content-end mt-5">
  <button
    (click)="descargarExcelErroresImportar()"
    class="btn btn-outline btn-primary"
  >
    <i class="ki-filled ki-file-down"></i>
    Descargar errores
  </button>
</div>
}